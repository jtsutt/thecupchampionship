var matchdataM = {  
    "hole" : 0, 
    "time" : new Date(), 
    "T1pts" : 0, 
    "T2pts" : 0, 
    "status" : 0, 
    "statusF9" : 0, 
    "statusB9" : 0, 
    "day" : 1, 
    "T1chances" : 0, 
    "T2chances" : 0, 
    "T1odds" : "EVEN", 
    "T2odds" : "EVEN", 
    "stats" : {
        "predict" : [
            0, 
            0
        ], 
        "dH" : 0, 
        "powerT1" : [
            50,50
        ], 
        "powerT2" : [
            50,50
        ]
    }, 
    "record" : {
        "par3" : [
            0,0,0
        ], 
        "par4" : [
            0,0,0
        ], 
        "par5" : [
           0,0,0
        ]
    }, 
    "predict" : [
        0,0
    ], 
    "holes" : {
        "h1" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T14:15:00.985+0000"
            }
        }, 
        "h2" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T14:30:00.985+0000"
            }
        }, 
        "h3" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T14:45:00.985+0000"
            }
        }, 
        "h4" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T15:00:00.985+0000"
            }
        }, 
        "h5" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T15:15:00.985+0000"
            }
        }, 
        "h6" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T15:30:00.985+0000"
            }
        }, 
        "h7" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T15:45:00.985+0000"
            }
        }, 
        "h8" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T16:00:00.985+0000"
            }
        }, 
        "h9" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T16:15:00.985+0000"
            }
        }, 
        "h10" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T16:30:00.985+0000"
            }
        }, 
        "h11" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T16:45:00.985+0000"
            }
        }, 
        "h12" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T17:00:00.985+0000"
            }
        }, 
        "h13" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T17:15:00.985+0000"
            }
        }, 
        "h14" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T17:30:00.985+0000"
            }
        }, 
        "h15" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T17:45:00.985+0000"
            }
        }, 
        "h16" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T18:00:00.985+0000"
            }
        }, 
        "h17" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T18:15:00.985+0000"
            }
        }, 
        "h18" : {
            "result" : 2, 
            "status" : {
                "all" : "N", 
                "f9" : "N", 
                "b9" : "N"
            }, 
            "location" : "", 
            "event" : {
                "status" : "", 
                "leads" : "", 
                "predict" : ""
            }, 
            "time" : {
                "expected" : "2017-09-08T18:30:00.985+0000"
            }
        }
    }, 
    "T1" : [], 
    "T2" : [], 
    "active" : 0, 
};
    
    
    var matchdataE = { 
    "handicap" : 1, 
    "index" : 0, 
    "hole" : 0, 
    "time" : new Date(), 
    "T1pts" : 0, 
    "T2pts" : 0, 
    "status" : 0, 
    "result" : [
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N"
    ], 
    "net" : [
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N", 
        "N"
    ], 
    "previous" : {
        "scores" : [], 
        "net" : 0, 
        "gross" : 0
    }, 
    "statusF9" : 0, 
    "statusB9" : 0, 
    "access" : [
        "thecupchampionship@gmail.com"
    ], 
    "day" : 1, 
    "T1chances" : 0, 
    "T2chances" : 0, 
    "T1odds" : 100, 
    "T2odds" :100, 
    "stats" : {
        "power" : 0.0
    }, 
    "netstatus" : 0,  
    "T1" : [
    ]
};

Template.overlayadd.onRendered(function(){
})

Template.overlayadd.helpers({
  
});

Template.overlayadd.events({
  'click .add': function(event,template){
    switch (template.data.type){
        case 'exhibition':
            var event = Session.get("currentevent");
            var e = Exhibitions.findOne({event:event,year:Session.get('selectedYear')},{sort:{unique:-1}});
             var c = Cups.findOne({event:event,year:Session.get('selectedYear')});
            var E = Events.findOne({description:event});
            if (e == undefined){var unique = "a";}
            else {var unique = nextChar(e.unique);}
            var d  =new Date(); var year = d.getYear()+1900;
            var data = { 
                "description" : document.getElementById("description").value, 
                "credential" : 1, 
                "hardcodeaccess" : 0, 
                "admins" : c.admins,
                "year" : year, 
                "date" : d, 
                "type" : document.getElementById("format").value, 
                "handicap" : 1, 
                "course" : document.getElementById("course").value, 
                "event" : event, 
                "format" : "", 
                "access" : [
                    true
                ]
            };
            var iyr = 100*(year-2000);
            switch (document.getElementById("format").value) {
                case 'singles':
                    data.unique = unique;
                    Exhibitions.insert(data);
                    var matchdata = matchdataM;
                    matchdata.type = document.getElementById("format").value;
                    matchdata.event = event;
                    matchdata.course = document.getElementById("course").value;
                    matchdata.T1 = ["Player 1"]; matchdata.T2 = ["Player 2"];
                    for (var i=1;i<=parseInt(document.getElementById("nummatches").value);i++){
                        matchdata.matchID = (unique+(iyr+i));
                        Matches.insert(matchdata);
                        
                        console.log(matchdata.matchID,'added');
                    }
                    break;
                case 'bestball':
                    data.unique = unique;
                    Exhibitions.insert(data);
                    var matchdata = matchdataM;
                    matchdata.type = document.getElementById("format").value;
                    matchdata.event = event;
                    matchdata.course = document.getElementById("course").value;
                    matchdata.T1 = ["Player 1","Player 2"]; matchdata.T2 = ["Player 1","Player 2"];
                    for (var i=1;i<=parseInt(document.getElementById("nummatches").value);i++){
                        matchdata.matchID = (unique+(iyr+i));
                        Matches.insert(matchdata);
                        console.log(matchdata.matchID,'added'); 
                    }
                    break; 
                case 'stroke':
                    var matchdata = matchdataE;
                    data.unique = unique;
                    Exhibitions.insert(data);
                    matchdata.T1 = ["Player 1"];
                    matchdata.type = document.getElementById("format").value;
                    matchdata.event = event;
                    matchdata.course = document.getElementById("course").value;
                    for (var i=1;i<=parseInt(document.getElementById("nummatches").value);i++){
                        matchdata.matchID = (unique+(iyr+i));
                        Matches.insert({type:document.getElementById("format").value,matchID:(unique+(iyr+i))});
                        console.log((unique+(iyr+i)),'added'); 
                    }
                    break;    
            }
            break;
        case 'match':
            break;
        case 'member':
            break;
    }
  }
});
